{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial</title>
    <link rel="stylesheet" href="{% static 'css/historial.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive historial.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive contactanos.css' %}">

<body>
    {% csrf_token %}

  <header class="header-movil">
    <div class="hamburger" onclick="toggleMenu()">☰</div>
    <h1 class="titulo-movil">Datos Sensores</h1>
    <img src="{% static 'image/logo_empresa.png' %}" alt="Logo" class="logo-movil">
  </header>

    <!-- Barra navegación escritorio -->
    <nav class="barra-navegacion-superior">
            

        <img src="{% static 'image/logo_empresa.png' %}" alt="Logo de la Empresa" class="logo" />
        <ul class="enlaces-nav">
            <li><a href="{% url 'historial' %}?id={{ request.GET.id }}" class="{% if request.path == '/index/login/historial/' %}activo{% endif %}">Historial</a></li>
            <li><a href="{% url 'datos' %}?id={{ request.GET.id }}" class="{% if request.path == '/index/login/datos/' %}activo{% endif %}">Datos</a></li>
            <li><a href="{% url 'recomendaciones' %}?id={{ request.GET.id }}" class="{% if request.path == '/index/login/recomendaciones/' %}activo{% endif %}">Sugerencias</a></li>
        </ul>
    </nav>

    <!-- Menú desplegable móvil -->
    <div id="mobileMenu" class="mobile-menu">
        <a href="{% url 'historial' %}?id={{ request.GET.id }}">Historial</a>
        <a href="{% url 'datos' %}?id={{ request.GET.id }}">Datos</a>
        <a href="{% url 'recomendaciones' %}?id={{ request.GET.id }}">Sugerencias</a>
        <a href="{% url 'login' %}" class="btn-cerrar">Cerrar sesión</a>
    </div>

    <!-- Contenedor principal -->
    <div class="contenedor">
        <div class="titulo-barra">
            <h2>Historial De Sensores</h2>

            <!-- Barra de búsqueda -->
            <div class="barra-busqueda">
                <div id="poda">
                    <div class="glow"></div>
                    <div class="darkBorderBg"></div>
                    <div class="darkBorderBg"></div>
                    <div class="darkBorderBg"></div>
                    <div class="white"></div>
                    <div class="border"></div>
                    <div id="main">
                        <input placeholder="Busca Por Fecha (YYYY-MM-DD)" type="date" id="inputBusqueda" name="fecha" class="input" />
                        <div id="input-mask"></div>
                        <div id="pink-mask"></div>
                        <div id="search-icon">
                            <button type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" height="24" fill="none" class="feather feather-search">
                                    <circle stroke="url(#search)" r="8" cy="11" cx="11"></circle>
                                    <line stroke="url(#searchl)" y2="16.65" y1="22" x2="16.65" x1="22"></line>
                                    <defs>
                                        <linearGradient gradientTransform="rotate(50)" id="search">
                                            <stop stop-color="#f8e7f8" offset="0%"></stop>
                                            <stop stop-color="#b6a9b7" offset="50%"></stop>
                                        </linearGradient>
                                        <linearGradient id="searchl">
                                            <stop stop-color="#b6a9b7" offset="0%"></stop>
                                            <stop stop-color="#837484" offset="50%"></stop>
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Botón de descarga movido abajo: la caja superior queda vacía para mantener el espaciado si se necesitara -->
        <div class="tabla-actions" style="width:90%; max-width:1000px; display:flex; justify-content:center; margin:10px 0;">
        </div>
        

        <!-- jsPDF y autoTable (CDN) -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

        <div class="tabla-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Humedad (%)</th>
                        <th>Temperatura (°C)</th>
                        <th>pH</th>
                        <th>Dispositivo</th>
                    </tr>
                </thead>
                <tbody id="tabla-cuerpo">  
                    <tr>
                        <td colspan="5">Cargando datos...</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- Botón Descargar PDF: aparece justo debajo de la tabla y alineado a la derecha -->
        <div class="tabla-actions-bottom" style="width:90%; max-width:1000px; margin:10px 0;">
            <button id="download-pdf-btn" class="btn-download-pdf" title="Descargar PDF">
                <img class="icono-pdf" src="{% static 'image/pdf.png' %}" alt="">
                Descargar PDF
            </button>
        </div>
    </div>
  <!-- Container con todos los elementos en la parte inferior -->
<div class="footer-container">
    <div class="footer-content">
        <div class="logo-nombre">
            <img src="{% static 'image/logo_empresa.png' %}" alt="Logo de la Empresa" class="logo">
            <div class="nombre-empresa">Nombre De La Empresa</div>
        </div>
        <div class="redes-sociales">
            <a href="#"><img src="{% static 'image/facebook.png' %}" alt="Facebook" class="redes-icono"></a>
            <a href="#"><img src="{% static 'image/x.png' %}" alt="Twitter" class="redes-icono"></a>
            <a href="#"><img src="{% static 'image/instagram.png' %}" alt="Instagram" class="redes-icono"></a>
           
        </div>
    </div>
    <hr>
    <div class="informacion-footer">
        <div class="acordeon-item">
            <h3 class="acordeon-header">Información <span class="icono-acordeon">+</span></h3>
            <ul class="acordeon-content">
                <li><a href="">Políticas y privacidad</a></li>
                <li><a href="">Términos y condiciones</a></li>
                <li><a href="">Testimonios de clientes</a></li>
            </ul>
        </div>
        <div class="acordeon-item">
            <h3 class="acordeon-header">Recursos <span class="icono-acordeon">+</span></h3>
            <ul class="acordeon-content">
                <li><a href="">Guía de uso para el pH del suelo</a></li>
                <li><a href="">Guía de interpretación del suelo</a></li>
                <li><a href="">Blog / Artículos educativos sobre el suelo y pH</a></li>
            </ul>
        </div>
        <div class="acordeon-item">
            <h3 class="acordeon-header">Soporte <span class="icono-acordeon">+</span></h3>
            <ul class="acordeon-content">
                <li><a href="">Soporte Técnico / FAQ</a></li>
                <li><a href="">Newsletter / Suscripción a Actualizaciones</a></li>
            </ul>
        </div>
    </div>
    <footer>
        <div class="footer-left">
            <p>&copy; Fundación Escuela Tecnológica (FET) <br> Desarrolladores Daniel Rojas Y Santiago Losada</p>
        </div>
        <div class="footer-right">
            <p>&copy; Políticas de privacidad -<br> términos Y Condiciones</p>
        </div>
    </footer>
</div>

    <!-- Botón flotante cerrar sesión (solo escritorio) -->
    <div class="cerrar-sesion">
        <a href="{% url 'login' %}">Cerrar sesión</a>
    </div>

    <!-- Modal -->
    <div id="modalResultados" class="modal">
        <div class="modal-contenido">
            <span class="cerrar-modal">&times;</span>
            <table>
                <thead>
                    <tr>
                        <th>Humedad(%)</th>
                        <th>Temperatura °C</th>
                        <th>Ph</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td id="humedad-modal">--</td>
                        <td id="temperatura-modal">--</td>
                        <td id="ph-modal">--</td>
                    </tr>
                </tbody>
            </table>

            <br>

           <p id="fecha-texto">
            El día <span id="dia"></span> del mes <span id="mes"></span> del año <span id="anio"></span> 
        
            ¿Quieres sugerencias sobre qué fertilizantes deberías usar? <br>
            Siendo así, procede a dar click al botón de sugerencias:
        </p>

        <br>

  <div class="boton-wrapper">
    <form action="{% url 'recomendaciones' %}" method="get">
        <input type="hidden" name="id" value="{{ request.GET.id }}">
        <button   id="sugerencias-btn" type="submit">
            Sugerencias
        </button>
    </form>
</div>

        </div>
    </div>
 

    <script src="{% static 'javascript/historial_datos.js' %}"></script>
    <script src="{% static 'javascript/barra_d_busqueda.js' %}"></script>
     <script src="{% static 'javascript/responsive mobil.js' %}"></script>
     
</body>
</html>
